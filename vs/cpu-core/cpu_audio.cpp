#include "pch.h"

cpu_audio::cpu_audio()
{
	pAudio = nullptr;
	pVoice = nullptr;
}

cpu_audio::~cpu_audio()
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

cpu_audio& cpu_audio::GetInstance()
{
	static cpu_audio audio;
	return audio;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

bool cpu_audio::Initialize()
{
	if ( FAILED(XAudio2Create(&pAudio, 0, XAUDIO2_DEFAULT_PROCESSOR)) )
		return false;

	if ( FAILED(pAudio->CreateMasteringVoice(&pVoice)) )
	{
		CPU_RELEASE(pAudio);
		return false;
	}

	return true;
}

void cpu_audio::Uninitialize()
{
	if ( pVoice )
	{
		pVoice->DestroyVoice();
		pVoice = nullptr;
	}
	CPU_RELEASE(pAudio);
}
