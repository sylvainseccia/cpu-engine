#include "stdafx.h"

cpu_texture::cpu_texture()
{
	rgba = nullptr;
	Close();
}

cpu_texture::~cpu_texture()
{
	Close();
}

bool cpu_texture::Load(const char* path)
{
	Close();

	int filesize;
	byte* data = LoadFile(path, filesize);
	if ( data==nullptr )
		return false;

	int w, h;
	byte* buf = png_lib::parse_png_rgba(data, filesize, &w, &h);
	delete [] data;
	if ( buf==nullptr )
		return false;

	rgba = buf;
	width = w;
	height = h;
	count = width * height;
	size = count * 4;
	return true;
}

void cpu_texture::Close()
{
	delete [] rgba;
	rgba = nullptr;
	width = 0;
	height = 0;
	count = 0;
	size = 0;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

cpu_sprite::cpu_sprite()
{
	pTexture = nullptr;
	x = 0;
	y = 0;
	z = 0;
	anchorX = 0;
	anchorY = 0;
	index = -1;
	sortedIndex = -1;
	dead = false;
	visible = true;
}

void cpu_sprite::CenterAnchor()
{
	if ( pTexture )
	{
		anchorX = pTexture->width/2;
		anchorY = pTexture->height/2;
	}
}
