#include "stdafx.h"

cpu_material::cpu_material()
{
#ifdef _DEBUG
	lighting = CPU_LIGHTING_GOURAUD;
#else
	lighting = CPU_LIGHTING_LAMBERT;
#endif

	ps = nullptr;
	color = CPU_WHITE;
	values = nullptr;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

cpu_rt::cpu_rt()
{
	index = -1;
	sortedIndex = 1;
	dead = false;

	Destroy();
}

void cpu_rt::Create(bool useDepth)
{
	cpu_rt& rt = *cpu.GetMainRT();
	width = rt.width;
	height = rt.height;
	aspectRatio = rt.aspectRatio;
	pixelCount = rt.pixelCount;
	widthHalf = rt.widthHalf;
	heightHalf = rt.heightHalf;
	colorBuffer.resize(pixelCount);
	depth = useDepth;
	if ( depth )
		depthBuffer.resize(pixelCount);
	else
		depthBuffer.clear();
}

void cpu_rt::Destroy()
{
	width = 0;
	height = 0;
	pixelCount = 0;
	widthHalf = 0;
	heightHalf = 0;
	depth = false;
	colorBuffer.clear();
	depthBuffer.clear();
}
